# magic-worker-plugin



## instalation

```bash
npm i magicworkerplugin
```

## plugin

```js
// webpack.config.js

const MagicWorker = require('./magicworker/plugin');

var config = module.exports = {

    // all your webpack config...

    plugins: [

        // any other plugin you need...

        new MagicWorker({
            target: 'sw.js',
            exclude: ['**.*map'],
            include: ['/'],
            minify: PROD,
            options: {
                fastMode: false,
                // debug: 5,
            },
        }),
    ],
};
```

### options

name | default | description
---|---|---
target | `sw.js` | name of service work file generated by webpack
exclude | `[**.*map]` | list of pattern to ignore. If empty then every file generated by webpack will be added to the cache list
include | `['/']` | list of files to include in cache. Do not include files already generated by webpack
minify | `false` | If you want the service worker code to be minified 
options | `{}` | An object to be serialized and made available to your service worker code

### service worker code

```js
// those three variables are going to be prepended to your original sw.js by this plugin

var CACHE_VERSION = '<DATE>';
var OPTIONS = {}; //whatever you pass to options above
var ASSETS = []; // the list of files to be cached

// from this point to the bottom is up to you!

self.addEventListener('install', function(event){});
self.addEventListener('activate', function(event){});
self.addEventListener('fetch', function(event){});
self.addEventListener('sync', function(event){});
self.addEventListener('push', function(event){});
self.addEventListener('message', function(event){});
```

## runtime

